<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Result</title>
<link rel="stylesheet" href="result.css" />

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.21.0/firebase-firestore.js"></script>

<script>
// Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyD7Vzfe7viToWId85cLCDL7UR5Wp2saxvo",
  authDomain: "edu-nonative.firebaseapp.com",
  projectId: "edu-nonative",
  storageBucket: "edu-nonative.firebasestorage.app",
  messagingSenderId: "580157959506",
  appId: "1:580157959506:web:06b315793da07aa7ddde8b",
  measurementId: "G-FE3QW8PY8R"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
</script>

<style>
button {
    padding: 5px;
    margin-left: 30px;
    margin-right: 0%;
}
button:hover {
    background-color: aquamarine;
    padding: 10px;
}
</style>
</head>
<body class="lastbody">

<!-- Corrected button structure -->
<button onclick="location.href='home.html'">H</button>
<br>
<span>o</span><br>
<span>m</span><br>
<span>e</span>

<div class="average-container">
    <h1 class="average">Your Average Grade</h1>
    <p id="result"></p>
</div>

<!-- Container for displaying individual grades -->
<div id="gradesContainer"></div>

<script>
function displayGrades() {
    const lrn = localStorage.getItem('currentLRN'); // get saved LRN
    const container = document.getElementById('gradesContainer');
    const resultPara = document.getElementById('result');

    if (!lrn) {
        container.textContent = "LRN not found.";
        resultPara.textContent = "";
        return;
    }

    const gradesStr = localStorage.getItem(`grades_${lrn}`); // get grades for LRN
    if (!gradesStr) {
        container.textContent = "No grades found for this LRN.";
        resultPara.textContent = "";
        return;
    }

    const grades = JSON.parse(gradesStr);
    const gradeValues = [
        grades.english,
        grades.filipino,
        grades.science,
        grades.arpa,
        grades.mapeh,
        grades.esp,
        grades.math,
        grades.tle
    ];

    // Calculate average
    const total = gradeValues.reduce((sum, grade) => sum + grade, 0);
    const average = (total / gradeValues.length).toFixed(2);

    // Display individual grades
    container.innerHTML = `
    <div class="grade-box">
        <h2>Grades for LRN: ${lrn}</h2>
        <p>English: ${grades.english}</p>
        <p>Filipino: ${grades.filipino}</p>
        <p>Science: ${grades.science}</p>
        <p>Arpa: ${grades.arpa}</p>
        <p>Mapeh: ${grades.mapeh}</p>
        <p>ESP: ${grades.esp}</p>
        <p>Mathematics: ${grades.math}</p>
        <p>TLE: ${grades.tle}</p>
    </div>
    `;

    // Display the average grade
    resultPara.textContent = `Your average grade is: ${average} Congrats you passed!`;
}

// Run this function when the page loads
window.onload = displayGrades;
</script>

</body>
</html>
